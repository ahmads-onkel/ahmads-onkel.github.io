<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Risk Higher Lower</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=IBM+Plex+Mono:wght@500;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    background:#111;
    color:#eee;
    font-family:'Inter',sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

.game{
    width:420px;
    padding:30px;
    background:#1a1a1a;
    border-radius:14px;
    text-align:center;
    box-shadow:0 0 40px rgba(0,0,0,.5);
}

.number{
    font-size:72px;
    font-weight:800;
    margin:20px 0;
    transition:.2s;
}

.range{
    font-size:14px;
    opacity:.6;
}

.risk{
    margin:10px 0;
    font-size:14px;
    opacity:.7;
}

.money{
    font-family:'IBM Plex Mono',monospace;
    font-size:20px;
    margin:10px 0;
}

.profit{
    font-family:'IBM Plex Mono',monospace;
    font-size:14px;
    margin-bottom:10px;
    height:18px;
}

button{
    width:45%;
    padding:12px;
    margin:5px;
    background:#222;
    color:#eee;
    border:1px solid #333;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    transition:.2s;
}

button:hover{
    background:#2a2a2a;
}

.cashout{
    width:94%;
    margin-top:10px;
}

.streak{
    margin-top:10px;
    font-size:14px;
    opacity:.6;
}
</style>
</head>

<body>

<div class="game">
    <div class="range" id="rangeDisplay"></div>
    <div class="number" id="number">50</div>
    <div class="risk" id="riskDisplay"></div>
    <div class="money" id="balance">Kontostand: 1000€</div>
    <div class="profit" id="profit"></div>

    <button onclick="guess('higher')">HIGHER</button>
    <button onclick="guess('lower')">LOWER</button>
    <button class="cashout" onclick="cashout()">CASHOUT</button>

    <div class="streak" id="streak">Streak: 0</div>
</div>

<script>
let min = 1;
let max = 100;
let current = random();
let balance = 1000;
let bet = 100;
let streak = 0;

const MIN_RANGE_SIZE = 10;
const HOUSE_EDGE = 0.95; // 5% house edge
const MAX_MULTIPLIER = 10;

updateUI();

function random(){
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function updateUI(){
    document.getElementById("number").innerText = current;
    document.getElementById("balance").innerText = "Kontostand: " + balance + "€";
    document.getElementById("rangeDisplay").innerText = "Range: " + min + " - " + max;
    document.getElementById("streak").innerText = "Streak: " + streak;

    let total = max - min;
    let pHigher = current >= max ? 0 : (max - current) / total;
    let pLower  = current <= min ? 0 : (current - min) / total;

    document.getElementById("riskDisplay").innerText =
        "Higher: " + (pHigher * 100).toFixed(1) + "% | Lower: " + (pLower * 100).toFixed(1) + "%";
}

function guess(type){

    if(balance < bet){
        alert("Nicht genug Guthaben!");
        return;
    }

    let next = random();
    let win = false;
    let total = max - min;
    let p = 0;

    if(type === "higher"){
        p = current >= max ? 0 : (max - current) / total;
        if(next > current) win = true;
    } else {
        p = current <= min ? 0 : (current - min) / total;
        if(next < current) win = true;
    }

    if(next === current) win = false; // Gleichstand = Verlust

    if(win && p > 0){

        let multiplier = (1 / p) * HOUSE_EDGE;
        if(multiplier > MAX_MULTIPLIER) multiplier = MAX_MULTIPLIER;

        let gain = Math.floor(bet * multiplier);

        if(streak >= 3){
            gain += 20; // Combo Bonus
        }

        balance += gain;
        document.getElementById("profit").innerText = "+" + gain + "€";
        streak++;

        if(streak % 3 === 0 && (max - min) > MIN_RANGE_SIZE){
            min += 2;
            max -= 2;
        }

        current = next;

    } else {

        balance -= bet;
        document.getElementById("profit").innerText = "-" + bet + "€";
        streak = 0;
        resetRange();
        current = random();
    }

    if(balance <= 0){
        alert("Game Over");
        balance = 1000;
        streak = 0;
        resetRange();
        current = random();
    }

    updateUI();
}

function cashout(){

    if(streak > 0){
        let bonus = streak * 10;
        balance += bonus;
        document.getElementById("profit").innerText = "Cashout Bonus +" + bonus + "€";
    }

    streak = 0;
    resetRange();
    current = random();
    updateUI();
}

function resetRange(){
    min = 1;
    max = 100;
}
</script>

</body>
</html>
