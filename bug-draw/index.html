<!DOCTYPE html>
<html>
<head>
<title>Bug Painter</title>
<style>
body{
    background:#eee;
    display:flex;
    flex-direction:column;
    align-items:center;
    font-family:sans-serif;
}
canvas{
    background:white;
    border:2px solid black;
}
input{
    margin:20px;
    padding:10px;
    font-size:18px;
    width:300px;
}
</style>
</head>
<body>

<input id="textInput" placeholder="type something..." />
<canvas id="canvas" width="600" height="600"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const input = document.getElementById("textInput");

let path = [];
let drawing = false;

input.addEventListener("keydown", e=>{
    if(e.key === "Enter"){
        generate(input.value);
    }
});

function generate(text){

    ctx.clearRect(0,0,600,600);

    let seed = 0;
    for(let i=0;i<text.length;i++){
        seed += text.charCodeAt(i);
    }

    function random(){
        seed = (seed * 9301 + 49297) % 233280;
        return seed / 233280;
    }

    path = [];

    let x = 300;
    let y = 300;

    for(let i=0;i<200;i++){

        let angle = random() * Math.PI * 2;
        let length = 40 + random()*120;

        let newX = x + Math.cos(angle) * length;
        let newY = y + Math.sin(angle) * length;

        newX = Math.max(10, Math.min(590,newX));
        newY = Math.max(10, Math.min(590,newY));

        path.push({x:newX, y:newY});
        x = newX;
        y = newY;
    }

    animateBug();
}

function animateBug(){

    if(drawing) return;
    drawing = true;

    let i = 0;
    let currentX = 300;
    let currentY = 300;

    ctx.lineWidth = 1;
    ctx.lineCap = "round";
    ctx.strokeStyle = "black";

    function step(){

        if(i >= path.length){
            drawing = false;
            return;
        }

        let target = path[i];

        let dx = target.x - currentX;
        let dy = target.y - currentY;
        let dist = Math.sqrt(dx*dx + dy*dy);

        if(dist < 2){
            i++;
        } else {

            let speed = 3;

            currentX += dx/dist * speed;
            currentY += dy/dist * speed;

            ctx.beginPath();
            ctx.moveTo(currentX, currentY);
            ctx.lineTo(currentX - dx/dist * speed,
                       currentY - dy/dist * speed);
            ctx.stroke();

            // Bug zeichnen (Ã¼ber der Linie)
            ctx.beginPath();
            ctx.arc(currentX, currentY, 4, 0, Math.PI*2);
            ctx.fillStyle = "red";
            ctx.fill();
        }

        requestAnimationFrame(step);
    }

    step();
}
</script>

</body>
</html>
